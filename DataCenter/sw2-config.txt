===========
=== SW2 ===
===========

enable
configure terminal
no spanning-tree vlan 10,20,30,40 priority 0
interface g0/0
no switchport trunk allowed vlan
exit
hostname SW2
vlan 10
name V10_AAA
vlan 20
name V20_HTTP
vlan 30
name V30_TFTP
vlan 40
name V40_DNS
exit
no ip routing
interface vlan 10
ip address 172.16.10.4 255.255.255.0
no shut
exit
interface vlan 20
ip address 172.16.20.4 255.255.255.0
no shut
exit
interface vlan 30
ip address 172.16.30.4 255.255.255.0
no shut
exit
interface vlan 40
ip address 172.16.40.4 255.255.255.0
no shut
exit
interface gi0/0
switchport mode access
switchport access vlan 30
spanning-tree portfast 
spanning-tree bpduguard enable
switchport port-security
switchport port-security maximum 1
switchport port-security mac-address 0242.bf0c.8f00
switchport port-security violation restrict
no sh
exit
interface gi0/1
switchport mode access
switchport access vlan 40
spanning-tree portfast 
spanning-tree bpduguard enable
switchport port-security
switchport port-security maximum 1
switchport port-security mac-address 0242.f6bb.ba00
switchport port-security violation restrict
no sh
exit
interface range gi1/0-1
channel-group 1 mode active
no sh
exit
interface port-channel 1
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
interface range gi1/2-3
channel-group 3 mode active
no sh
exit
interface port-channel 3
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
int range gi0/2-3
shutdown
exit
ip dhcp snooping
ip dhcp snooping vlan 10,20,30,40
ip arp inspection vlan 10,20,30,40
interface port-channel 1
ip dhcp snooping trust
ip arp inspection trust
exit
interface port-channel 3
ip dhcp snooping trust
ip arp inspection trust
exit
interface gi0/0
ip dhcp snooping trust
ip arp inspection trust
exit
interface gi0/1
ip dhcp snooping trust
ip arp inspection trust
exit
service password-encryption
enable secret cisco-for-fun
line console 0
password cisco-for-fun
login 
logging synchronous
exec-timeout 10 0
exit
ip domain-name cisco.com
username admin secret cisco-for-fun
crypto key generate rsa modulus 2048
line vty 0 4
transport input ssh
login local
exec-timeout 10 0
exit
ip ssh version 2
banner motd #
********************************************************
*  WARNING: Unauthorized access is strictly prohibited *
********************************************************
#
do wr
conf t
aaa new-model
aaa authentication login SSH_AUTH group tacacs+ local
aaa authorization exec SSH_AUTH group tacacs+ local
tacacs server AAA-SERVER
address ipv4 172.16.10.1
key cisco-for-fun
exit
line vty 0 4
login authentication SSH_AUTH
transport input ssh
exit
do wr
copy running-config tftp: //172.16.30.1
