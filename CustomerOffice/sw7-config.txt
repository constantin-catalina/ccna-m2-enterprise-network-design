===========
=== SW7 ===
===========

enable
configure terminal
hostname SW7
vlan 10
name V10
vlan 20
name V20
vlan 30
name V30
vlan 40
name V40
exit
no ip routing
interface vlan 10
ip address 192.168.10.5 255.255.255.0
no shut
exit
interface vlan 20
ip address 192.168.20.5 255.255.255.0
no shut
exit
interface vlan 30
ip address 192.168.30.5 255.255.255.0
no shut
exit
interface vlan 40
ip address 192.168.40.5 255.255.255.0
no shut
exit
spanning-tree mode rapid-pvst
interface gi0/0
switchport mode access
switchport access vlan 10
spanning-tree portfast 
spanning-tree bpduguard enable
switchport port-security
switchport port-security maximum 3
switchport port-security aging time 10
switchport port-security aging type inactivity
switchport port-security violation restrict
exit
interface gi0/1
switchport mode access
switchport access vlan 20
spanning-tree portfast 
spanning-tree bpduguard enable
switchport port-security
switchport port-security maximum 3
switchport port-security aging time 10
switchport port-security aging type inactivity
switchport port-security violation restrict
exit
interface range gi0/2-3
channel-group 1 mode desirable
no sh
exit
interface port-channel 1
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
interface range Gi1/0-1
channel-group 4 mode desirable
no sh
exit
interface port-channel 4
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
int range gi1/2-3
shutdown
exit
ip dhcp snooping
ip dhcp snooping vlan 10,20,30,40
ip arp inspection vlan 10,20,30,40
interface port-channel 1
ip dhcp snooping trust
ip arp inspection trust
exit
interface port-channel 4
ip dhcp snooping trust
ip arp inspection trust
exit
interface range gi0/0-1
ip dhcp snooping limit rate 10
exit
arp access-list ARP_VLAN10
permit ip host 192.168.10.21 mac host 0242.50a2.cd00
exit
arp access-list ARP_VLAN20
permit ip host 192.168.20.21 mac host 0242.55f9.e700
exit
ip arp inspection filter ARP_VLAN10 vlan 10
ip arp inspection filter ARP_VLAN20 vlan 20
service password-encryption
enable secret cisco-for-fun
line console 0
password cisco-for-fun
login 
logging synchronous
exec-timeout 10 0
exit
ip domain-name cisco.com
username admin secret cisco-for-fun
crypto key generate rsa modulus 2048
line vty 0 4
transport input ssh
login local
exec-timeout 10 0
exit
ip ssh version 2
banner motd #
********************************************************
*  WARNING: Unauthorized access is strictly prohibited *
********************************************************
#
do wr
conf t
aaa new-model
aaa authentication login SSH_AUTH group tacacs+ local
aaa authorization exec SSH_AUTH group tacacs+ local
tacacs server AAA-SERVER
address ipv4 172.16.10.1
key cisco-for-fun
exit
line vty 0 4
login authentication SSH_AUTH
transport input ssh
exit
do wr
copy running-config tftp: //172.16.30.1
