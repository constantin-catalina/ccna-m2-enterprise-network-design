===========
=== SW5 ===
===========

enable
configure terminal
hostname SW5
vlan 10
name V10
vlan 20
name V20
vlan 30
name V30
vlan 40
name V40
exit
spanning-tree mode rapid-pvst
spanning-tree vlan 30,40 priority 24576
spanning-tree vlan 10,20 priority 36864
interface e0/0
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
no sh
exit
interface vlan 10
ip address 192.168.10.3 255.255.255.0
no shut
exit
interface vlan 20
ip address 192.168.20.3 255.255.255.0
no shut
exit
interface vlan 30
ip address 192.168.30.3 255.255.255.0
no shut
exit
interface vlan 40
ip address 192.168.40.3 255.255.255.0
no shut
exit
interface range e0/2-3
channel-group 2 mode desirable
no sh
exit
interface port-channel 2
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
interface range e1/2-3
channel-group 3 mode desirable
no sh
exit
interface port-channel 3
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
interface range e1/0-1
channel-group 4 mode desirable
no sh
exit
interface port-channel 4
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
exit
spanning-tree vlan 40 root primary
int e0/1
shutdown
exit
int range e2/0-3
shutdown
exit
int range e3/0-3
shutdown
exit
service password-encryption
enable secret cisco-for-fun
line console 0
password cisco-for-fun
login 
logging synchronous
exec-timeout 10 0
exit
ip domain name cisco.com
username admin secret cisco-for-fun
crypto key generate rsa modulus 2048
line vty 0 4
transport input ssh
login local
exec-timeout 10 0
exit
ip ssh version 2
banner motd #
********************************************************
*  WARNING: Unauthorized access is strictly prohibited *
********************************************************
#
do wr
conf t
aaa new-model
aaa authentication login SSH_AUTH group tacacs+ local
aaa authorization exec SSH_AUTH group tacacs+ local
tacacs server AAA-SERVER
address ipv4 172.16.10.1
key cisco-for-fun
exit
line vty 0 4
login authentication SSH_AUTH
transport input ssh
exit
do wr
ip route 0.0.0.0 0.0.0.0 192.168.30.10
copy running-config tftp: //172.16.30.1

